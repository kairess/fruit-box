(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const d=17,f=10,E=120;let p=0,a=E,Y=null,I=!1,A=!1;const c=document.getElementById("grid"),q=document.getElementById("score"),R=document.getElementById("timer-bar"),S=document.getElementById("time-remaining"),m=document.getElementById("selection-box"),g=document.getElementById("start-button"),Q=document.getElementById("splash-screen"),O=document.getElementById("result-modal"),V=document.getElementById("final-score"),Z=document.getElementById("close-button"),h=document.getElementById("auto-solve-button");let L=!1,w=0,M=0,x=0,C=0;function k(){c.innerHTML="";for(let n=0;n<f*d;n++){const o=document.createElement("div");o.classList.add("apple");const s=Math.floor(Math.random()*9)+1;o.textContent=s,o.dataset.value=s,c.appendChild(o)}}function ee(n){p+=n,q.textContent=p}function te(){a=E,R.style.width="100%",S.textContent=`${a}`,Y=setInterval(()=>{a--;const n=a/E*100;R.style.width=`${n}%`,S.textContent=`${a}`,a<=0&&(clearInterval(Y),ne())},1e3)}function ne(){c.removeEventListener("mousedown",_),c.removeEventListener("mousemove",F),c.removeEventListener("mouseup",B),c.removeEventListener("mouseleave",B),I=!1,g.disabled=!1,g.textContent="게임 재시작",V.textContent=p,O.classList.remove("hidden")}function oe(){return c.getBoundingClientRect()}function P(n,o){const s=n.getBoundingClientRect(),l=s.left+s.width/2,e=s.top+s.height/2;return l>=o.left&&l<=o.right&&e>=o.top&&e<=o.bottom}function D(){const n=Math.min(w,x),o=Math.max(w,x),s=Math.min(M,C),l=Math.max(M,C);return{left:n,right:o,top:s,bottom:l}}function N(){const n=D(),o=oe();m.style.left=`${n.left-o.left}px`,m.style.top=`${n.top-o.top}px`,m.style.width=`${n.right-n.left}px`,m.style.height=`${n.bottom-n.top}px`}function _(n){I&&(L=!0,w=n.clientX,M=n.clientY,x=n.clientX,C=n.clientY,m.classList.remove("hidden"),N())}function F(n){if(!L)return;x=n.clientX,C=n.clientY,N();const o=D(),s=Array.from(document.querySelectorAll(".apple"));let l=0;s.forEach(e=>{P(e,o)?(l+=parseInt(e.dataset.value),e.classList.add("selected-apple")):e.classList.remove("selected-apple")}),m.style.borderColor=l===10?"red":"blue"}function B(n){if(!L)return;L=!1,m.classList.add("hidden"),document.querySelectorAll(".apple").forEach(t=>{t.classList.remove("selected-apple")});const o=D(),s=Array.from(document.querySelectorAll(".apple"));let l=0;const e=[];s.forEach(t=>{P(t,o)&&(l+=parseInt(t.dataset.value),e.push(t))}),l===10&&e.length>0&&(e.forEach(t=>{t.classList.add("pop"),t.addEventListener("animationend",()=>{t.classList.remove("apple","pop"),t.classList.add("empty"),t.textContent="",t.dataset.value=0,A&&H()},{once:!0})}),ee(e.length))}function se(){p=0,q.textContent=p,a=E,R.style.width="100%",S.textContent=`${a}`,k(),Q.classList.add("hidden"),O.classList.add("hidden"),c.addEventListener("mousedown",_),c.addEventListener("mousemove",F),c.addEventListener("mouseup",B),c.addEventListener("mouseleave",B),te(),I=!0,g.disabled=!0,g.textContent="게임 진행 중",A=!1,h.textContent="자동 풀기",h.disabled=!1;let n=document.getElementById("auto-solve-container");n&&n.remove()}function H(){A=!0,h.textContent="자동 풀기 중",h.disabled=!0;let n=document.getElementById("auto-solve-container");n&&n.remove(),n=document.createElement("div"),n.id="auto-solve-container",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.pointerEvents="none";const o=document.getElementById("grid-container");o.appendChild(n);const s=[],l=[];for(let e=0;e<=f;e++)s[e]=new Array(d+1).fill(0),l[e]=new Array(d+1).fill(0);for(let e=0;e<f;e++)for(let t=0;t<d;t++){const r=e*d+t,i=c.children[r],y=parseInt(i.dataset.value)||0,b=!i.classList.contains("empty")&&y>0?1:0;s[e+1][t+1]=s[e+1][t]+s[e][t+1]-s[e][t]+y,l[e+1][t+1]=l[e+1][t]+l[e][t+1]-l[e][t]+b}for(let e=0;e<f;e++)for(let t=e;t<f;t++)for(let r=0;r<d;r++)for(let i=r;i<d;i++){const y=s[t+1][i+1]-s[e][i+1]-s[t+1][r]+s[e][r],b=l[t+1][i+1]-l[e][i+1]-l[t+1][r]+l[e][r];if(y===10&&b>0){const K=c.children[e*d+r],U=c.children[t*d+i],v=o.getBoundingClientRect(),$=K.getBoundingClientRect(),G=U.getBoundingClientRect(),T=$.left-v.left,X=$.top-v.top,W=G.right-v.left,j=G.bottom-v.top,z=W-T,J=j-X,u=document.createElement("div");u.classList.add("auto-solve-overlay"),u.style.position="absolute",u.style.left=T+"px",u.style.top=X+"px",u.style.width=z+"px",u.style.height=J+"px",n.appendChild(u)}}}g.addEventListener("click",()=>{I||se()});Z.addEventListener("click",()=>{O.classList.add("hidden")});h.addEventListener("click",()=>{H()});
